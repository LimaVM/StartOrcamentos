<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Orçamento <%= orcamento.id %></title>
<style>
  body { font-family: 'Arial', sans-serif; font-size: 12px; margin: 20px; color:#333; }
  header { text-align:center; margin-bottom:20px; }
  header img { max-height:60px; }
  h1 { font-size:18px; margin:0; }
  table { width:100%; border-collapse:collapse; margin-top:10px; }
  th, td { border:1px solid #ccc; padding:6px; text-align:left; word-wrap:break-word; }
  th { background:#f0f0f0; }
  .totais { margin-top:15px; font-size:14px; }
  footer { margin-top:30px; text-align:center; }
</style>
</head>
<body>
<header>
  <img src="<%= logoUrl %>" alt="Logo">
  <h1>Orçamento</h1>
  <p>Referência: <%= orcamento.id %> | Data: <%= orcamento.dataCriacaoFormatada %></p>
</header>
<section>
  <p><strong>Cliente:</strong> <%= orcamento.nomeCliente %></p>
  <p><strong>Endereço:</strong> <%= orcamento.enderecoCliente %></p>
  <p><strong>Contato:</strong> <%= orcamento.telefoneCliente %> | <%= orcamento.emailCliente %></p>
</section>
<table>
  <thead>
    <tr>
      <th>Produto</th>
      <th>Descrição</th>
      <th>Qtd</th>
      <th>Valor Unit.</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <% orcamento.itens.forEach(item => { %>
    <tr>
      <td><%= item.nome %></td>
      <td><%= item.descricao %></td>
      <td style="text-align:center"><%= item.quantidade %></td>
      <td style="text-align:right"><%= item.valorUnitarioOriginalFormatado %></td>
      <td style="text-align:right"><%= item.valorTotalItemFormatado %></td>
    </tr>
    <% }); %>
  </tbody>
</table>
<div class="totais">
  <p><strong>Subtotal:</strong> <%= orcamento.valorTotalBrutoFormatado %></p>
  <% if (orcamento.descontoCalculado > 0) { %>
  <p><strong>Desconto:</strong> <%= orcamento.valorDescontoCalculadoFormatado %></p>
  <% } %>
  <p><strong>Total:</strong> <%= orcamento.valorTotalFormatado %></p>
  <% if (orcamento.formaPagamento === 'prazo') { %>
  <p><%= orcamento.parcelas %>x de <%= orcamento.valorParcelaFormatada %></p>
  <% } else { %>
  <p>Pagamento à vista (<%= orcamento.avistaTipo === 'cartao' ? 'Cartão' : 'Dinheiro' %>)</p>
  <% } %>
</div>
<footer>
  <p>Vendedor: <%= vendedor %></p>
</footer>
</body>
</html>
